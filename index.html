<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    <title>‚ú® Enhanced Journey EMG/NCS Learning System - Full Integration</title>
    <link rel="icon" type="image/png" href="images/ui/ERNEST.png">
    <link rel="apple-touch-icon" href="images/ui/ERNEST.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="css/enhanced-journey-candyland.css?v=20260224-layout-fix3">
    <link rel="stylesheet" href="css/professional-board-candyland.css">
    <link rel="stylesheet" href="css/ernest-animated.css?v=ernest17">
    <!-- Added Legendary System Styles -->
    <link rel="stylesheet" href="css/legendary-pathway-styles.css">
    <!-- Main Layout CSS (Extracted) -->
    <link rel="stylesheet" href="css/main-layout.css">
    <!-- Clinical Tool Overhaul Styles -->
    <link rel="stylesheet" href="src/modules/clinical/Clinical.css">
    <style>
        /* Essential overrides or dynamic styles can remain here if absolute necessary, 
           otherwise keep empty or for critical path CSS */
    </style>



</head>

<body>
    <div id="app-root"></div>
    <script type="module" src="src/ui/ViewHelpers.js"></script>

    <script type="module" src="src/modules/Initialization.js?v=quizFix1"></script>

    <!-- Support Scripts -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="js/neuropathy-pathophysiology-support.js"></script>

    <!-- Shared Quiz Utility Functions (used by multiple modules) -->


    <!-- Additional Support Functions for Modules -->


    <!-- Module 8: EMG Needle Localization System -->


    <!-- Module 9: Muscle Study System (Study Cards + EMG Challenge) -->


    <!-- Module 11: Neuropathy vs Myopathy Basics System -->


    <!-- Module 5: Neuropathy Pathophysiology Support Functions -->


    <!-- Module 7: NCS Techniques Support Functions -->


    <script src="src/modules/core/LegacyGlobals.js"></script>

    <!-- General Modal for Clinical Cases -->
    <div id="modal-overlay"
        style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.9); z-index: 20000; display: none; justify-content: center; align-items: center; overflow-y: auto;">
        <div
            style="background: white; border-radius: 15px; width: 95%; max-width: 1200px; max-height: 95vh; overflow-y: auto; position: relative; margin: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
            <div
                style="padding: 25px; border-bottom: 2px solid #e5e7eb; background: linear-gradient(135deg, #f3f4f6, #e5e7eb); border-radius: 15px 15px 0 0;">
                <h2 id="modal-title" style="margin: 0; color: #1f2937; font-size: 24px; font-weight: 700;"></h2>
                <button onclick="closeGeneralModal()"
                    style="position: absolute; top: 20px; right: 20px; background: #ef4444; color: white; border: none; font-size: 20px; cursor: pointer; width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; transition: all 0.2s;">√ó</button>
            </div>
            <div id="modal-body" style="padding: 30px; background: white; border-radius: 0 0 15px 15px;">
            </div>
        </div>
    </div>

    <!-- Description Panel Now Generated in Pathway HTML -->

    <!-- New UI Layout System - DISABLED (using custom Atrium Health system) -->
    <!-- <script src="js/new-ui-layout.js"></script> -->



    <!-- Learning Objectives Modal -->
    <div id="learning-objectives-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content learning-objectives-content">
            <div class="modal-header">
                <h2 class="modal-title">EMG/NCS Learning Objectives</h2>
                <button class="modal-close" onclick="closeLearningObjectives()">&times;</button>
            </div>
            <div class="modal-body">
                <!-- PGY-2 Section (Prominent) -->
                <div class="objectives-section pgy2-section">
                    <h3 class="objectives-header pgy2-header">üë®‚Äç‚öïÔ∏è PGY-2 Objectives</h3>
                    <p class="objectives-subtitle">Foundation & Developing Independence</p>

                    <div class="competency-group">
                        <h4>üî¨ NCS Patient Care</h4>
                        <ul>
                            <li>Describe peripheral anatomy (brachial plexus, lumbosacral plexus)</li>
                            <li>Perform focused H&P pertinent to study</li>
                            <li>Independently perform NCS screen for median, ulnar, radial nerves</li>
                        </ul>
                    </div>

                    <div class="competency-group">
                        <h4>ü¶¥ Radiculopathy</h4>
                        <ul>
                            <li>Understand pathophysiology of radiculopathy</li>
                            <li>Outline appropriate diagnostic plan</li>
                            <li>Properly perform NCS for radiculopathy (understand when NCS are normal vs abnormal)</li>
                        </ul>
                    </div>

                    <div class="competency-group">
                        <h4>‚ö° Peripheral Neuropathy</h4>
                        <ul>
                            <li>Assess and diagnose basic neuropathy patterns</li>
                            <li>Properly perform NCS for peripheral neuropathy</li>
                            <li>Classify neuropathy types (axonal vs demyelinating)</li>
                        </ul>
                    </div>

                    <div class="competency-group">
                        <h4>üß† Medical Knowledge</h4>
                        <ul>
                            <li>Differentiate neuropathy vs myopathy</li>
                            <li>Explain pathophysiological differences</li>
                            <li>Apply knowledge to diagnostic decision-making</li>
                        </ul>
                    </div>

                    <div class="competency-group">
                        <h4>üìä Spontaneous Discharges</h4>
                        <ul>
                            <li>Recognize fibrillation potentials and positive sharp waves</li>
                            <li>Identify fasciculation potentials and complex repetitive discharges</li>
                        </ul>
                    </div>

                    <div class="competency-group">
                        <h4>üó∫Ô∏è Plexus Anatomy</h4>
                        <ul>
                            <li>Trace nerve roots, branches, cords, divisions, and trunks (basic level)</li>
                            <li>Localize lesions in upper and lower limbs</li>
                        </ul>
                    </div>

                    <div class="competency-group">
                        <h4>üìù Report Writing</h4>
                        <ul>
                            <li>Understand importance of comprehensive EDx reports</li>
                            <li>Recognize basic structure</li>
                            <li>Complete templates with appropriate recommendations</li>
                        </ul>
                    </div>
                </div>

                <!-- Three Column Layout for PGY-3, PGY-4, Advanced -->
                <div class="objectives-grid">
                    <!-- PGY-3 Column -->
                    <div class="objectives-section pgy3-section">
                        <h3 class="objectives-header pgy3-header">üë©‚Äç‚öïÔ∏è PGY-3 Objectives</h3>
                        <p class="objectives-subtitle">Independent Practice</p>

                        <div class="competency-group-compact">
                            <h4>NCS Patient Care</h4>
                            <ul>
                                <li>Perform complete NCS independently</li>
                            </ul>
                        </div>

                        <div class="competency-group-compact">
                            <h4>Radiculopathy</h4>
                            <ul>
                                <li>Perform and interpret EMG studies independently</li>
                            </ul>
                        </div>

                        <div class="competency-group-compact">
                            <h4>Peripheral Neuropathy</h4>
                            <ul>
                                <li>Distinguish between different neuropathy patterns independently</li>
                            </ul>
                        </div>

                        <div class="competency-group-compact">
                            <h4>Medical Knowledge</h4>
                            <ul>
                                <li>Independently diagnose neuropathy vs myopathy cases</li>
                            </ul>
                        </div>

                        <div class="competency-group-compact">
                            <h4>Spontaneous Discharges</h4>
                            <ul>
                                <li>Assess myokymic discharges</li>
                                <li>Evaluate recruitment patterns qualitatively</li>
                            </ul>
                        </div>

                        <div class="competency-group-compact">
                            <h4>Plexus Anatomy</h4>
                            <ul>
                                <li>Understand entrapment neuropathy differential diagnosis</li>
                            </ul>
                        </div>

                        <div class="competency-group-compact">
                            <h4>Report Writing</h4>
                            <ul>
                                <li>Prepare comprehensive EDx reports in timely manner</li>
                            </ul>
                        </div>
                    </div>

                    <!-- PGY-4 Column -->
                    <div class="objectives-section pgy4-section">
                        <h3 class="objectives-header pgy4-header">ü©∫ PGY-4 Objectives</h3>
                        <p class="objectives-subtitle">Complex Cases</p>

                        <div class="competency-group-compact">
                            <h4>NCS Patient Care</h4>
                            <ul>
                                <li>Perform complex studies (blink reflex, repetitive nerve stimulation, proximal
                                    studies)</li>
                            </ul>
                        </div>

                        <div class="competency-group-compact">
                            <h4>Radiculopathy</h4>
                            <ul>
                                <li>Communicate findings via coherent EDx report</li>
                            </ul>
                        </div>

                        <div class="competency-group-compact">
                            <h4>Peripheral Neuropathy</h4>
                            <ul>
                                <li>Handle complex neuropathy cases with atypical presentations</li>
                            </ul>
                        </div>

                        <div class="competency-group-compact">
                            <h4>Medical Knowledge</h4>
                            <ul>
                                <li>Handle unusual and complex diagnostic scenarios</li>
                            </ul>
                        </div>

                        <div class="competency-group-compact">
                            <h4>Spontaneous Discharges</h4>
                            <ul>
                                <li>Evaluate recruitment patterns quantitatively</li>
                            </ul>
                        </div>

                        <div class="competency-group-compact">
                            <h4>Plexus Anatomy</h4>
                            <ul>
                                <li>Diagnose complex plexopathies with multiple level involvement</li>
                            </ul>
                        </div>

                        <div class="competency-group-compact">
                            <h4>Report Writing</h4>
                            <ul>
                                <li>Integrate clinical and EDx findings</li>
                                <li>Provide ranked differential diagnosis</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Advanced/Aspirational Column -->
                    <div class="objectives-section advanced-section">
                        <h3 class="objectives-header advanced-header">‚≠ê Advanced & Beyond</h3>
                        <p class="objectives-subtitle">Expert/Teaching Level</p>

                        <div class="competency-group-compact">
                            <h4>NCS Patient Care</h4>
                            <ul>
                                <li>Capable of teaching and discussing full differential diagnosis</li>
                            </ul>
                        </div>

                        <div class="competency-group-compact">
                            <h4>All Competencies</h4>
                            <ul>
                                <li>Expert level proficiency</li>
                                <li>Capable of teaching others</li>
                                <li>Handle all cases including rare/complex scenarios</li>
                                <li>Educate patients, families, and colleagues</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ernest AI JRPG System -->
    <!-- Ernest JRPG (Refactored to src/modules/ernest/ErnestCore.js) -->

    <!-- Global Compat Fix -->


    <!-- Injection for smooth overlay transitions -->
    <style>
        #modal-overlay {
            transition: opacity 0.3s ease !important;
            opacity: 0;
        }

        #modal-overlay.show {
            opacity: 1 !important;
        }
    </style>
</body>

</html>